<html>

<head>
    
    <script type="text/javascript">
        
        
        window.onload = function() {
            
	   // Get the window displayed in the iframe.
	   var iframeWindow = document.getElementById('receiver').contentWindow;
  
	   // Get a reference to the 'Send Message' button.
	   //var btn = document.getElementById('send');

	   // A function to handle sending messages.
	   function sendMessage(e) {
		  // Prevent any default browser behaviour.
		  e.preventDefault();

		  // Send a message with the text 'Hello Treehouse!' to the new window.
		  iframeWindow.postMessage({
                    formListGroup : [
                        {
                            gicon : 'glyphicon glyphicon-thumbs-up',
                            elementText : 'Like'
                        },
                        {
                            gicon : 'glyphicon glyphicon-pencil',
                            elementText : 'Question'
                        }
                    ],
                    formAllElements : [
                        {
                                id:0,
                                fieldTitle : 'Email',
                                fieldHelp : '* Enter your Email ID',
                                fieldType : 'inputBox',
                                fieldValues : []
                        }
                        
                    ],
                    formHeading : 'Feedback',
                    formDescription : 'Please tell us what do you think, any kind of feedback is highly appreciated !'
                }   , 'http://www.viralmint.com/');
	   }

        // Add an event listener that will execute the sendMessage() function
        // when the send button is clicked.
        document.getElementById('sendData').addEventListener('click', sendMessage);
    
    
            

          // A function to process messages received by the window.
          function receiveMessage(e) {
            // Check to make sure that this message came from the correct domain.
        //    if (e.origin !== "http://www.viralmint.com")
        //      return;
              console.log(e);
              console.log(e.data);
          }

          // Setup an event listener that calls receiveMessage() when the window
          // receives a new MessageEvent.
          window.addEventListener('message', receiveMessage);
            
        sendMessage({preventDefault:function(){}});
            
    
}

    </script>
    
</head>

<body>


    <h1>Controller Window</h1>
    <p>
        This document is on the domain: http://localhost
    </p>
    <p>
    </p>
    <div>
        <button type="button" id="sendData" > send data</button>
    </div>
    
    <iframe id="receiver" src="http://www.viralmint.com/feedbackapp/fdapp/app/templates/formBuilder-new.html" width="960" height="600">
        <p>Your browser does not support iframes.</p>
    </iframe>
</body>

</html>